<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>configng-v2 Modules Menu (Vertical Options)</title>
	<style>
		:root {
			--bg-main: #181b20;
			--bg-card: #23262b;
			--border: #31343a;
			--feature: #ececf0;
			--desc: #b4b5ba;
			--accent: #5eafff;
			--accent-light: #91d6ff;
			--btn-bg: #23262b;
			--btn-bg-hover: #31343a;
			--btn-border: #31343a;
			--btn-text: #ececf0;
			--radius: 4px;
		}

		body {
			background: var(--bg-main);
			color: var(--feature);
			font-family: system-ui, sans-serif;
			margin: 0;
			padding: 1.5em 0 2em 0;
		}

		h1 {
			text-align: center;
			color: var(--accent);
			font-weight: 600;
			margin-bottom: 0.4em;
			letter-spacing: 0.04em;
		}

		#breadcrumbs {
			max-width: 750px;
			margin: 1em auto 0 auto;
			display: flex;
			gap: 0.6em;
			flex-wrap: wrap;
		}

		.breadcrumb {
			background: var(--btn-bg);
			color: var(--btn-text);
			border: 1px solid var(--btn-border);
			border-radius: var(--radius);
			padding: 0.5em 1.3em;
			font-size: 1em;
			font-weight: 500;
			cursor: pointer;
			user-select: none;
			transition: background .12s, color .12s, border .12s;
		}

		.breadcrumb:hover,
		.breadcrumb:focus {
			background: var(--accent);
			color: #181b20;
			border-color: var(--accent-light);
		}

		#menu {
			max-width: 750px;
			margin: 1em auto;
		}

		ul,
		ol {
			list-style: none;
			padding: 0;
			margin: 0.5em 0 0 0;
		}

		li {
			margin-bottom: 0.2em;
		}

		.menu-btn,
		.feature-btn,
		.option-btn {
			background: var(--btn-bg);
			color: var(--btn-text);
			border: 1px solid var(--btn-border);
			border-radius: var(--radius);
			font-size: 1.08em;
			font-weight: 500;
			padding: 0.78em 1.2em;
			margin: 0.2em 0;
			cursor: pointer;
			transition: background .12s, color .12s, border .12s;
			box-shadow: none;
			outline: none;
			display: flex;
			align-items: center;
			width: 100%;
			text-align: left;
			gap: 0.6em;
		}

		.menu-btn:hover,
		.feature-btn:hover,
		.option-btn:hover,
		.menu-btn:focus,
		.feature-btn:focus,
		.option-btn:focus {
			background: var(--accent);
			color: #181b20;
			border-color: var(--accent-light);
		}

		.feature-label {
			font-weight: bold;
			color: var(--accent-light);
			margin-right: 0.7em;
			min-width: 110px;
		}

		.feature-desc {
			color: var(--desc);
			font-weight: 400;
			opacity: 0.95;
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
		}

		.module-card {
			background: var(--bg-card);
			border: 1px solid var(--border);
			border-radius: var(--radius);
			margin: 1.5em 0;
			padding: 1.1em 1.5em;
		}

		.module-card h2 {
			margin: 0 0 0.13em 0;
			font-size: 1.22em;
			font-weight: 700;
			color: var(--accent-light);
			letter-spacing: 0.03em;
		}

		.module-card .desc {
			color: var(--desc);
			margin-bottom: 0.5em;
			font-size: 1em;
			line-height: 1.5;
		}

		.options-block {
			margin: 1.2em 0 0.8em 0;
		}

		.option-desc {
			color: var(--desc);
			font-size: 0.97em;
			margin-left: 1.2em;
			margin-bottom: 0.4em;
			min-height: 1.1em;
		}

		.module-card details {
			margin-top: 0.7em;
			background: #1b232b;
			border-radius: var(--radius);
			padding: 0.5em 0.8em;
			border: 1px solid #26303a;
			color: var(--desc);
		}

		.module-card details summary {
			cursor: pointer;
			font-weight: 500;
			color: var(--accent);
			font-size: 1em;
			margin-bottom: 0.2em;
			outline: none;
		}

		.module-card pre {
			background: #191e25;
			color: #b4b5ba;
			border-radius: var(--radius);
			padding: 1em;
			margin: 0.7em 0 0 0;
			font-size: 0.98em;
			overflow-x: auto;
		}

		.module-card ul {
			margin-left: 1.2em;
			color: var(--desc);
		}

		#command-output {
			max-width: 750px;
			margin: 1.5em auto 0 auto;
			color: var(--accent-light);
			font-size: 1.13em;
			word-break: break-all;
		}

		@media (max-width: 600px) {
			body {
				padding: 0.5em 0 1em 0;
			}

			#breadcrumbs,
			#menu {
				max-width: 98vw;
			}

			.module-card {
				padding: 0.7em 0.8em;
			}

			.module-card h2 {
				font-size: 1.05em;
			}

			.feature-label {
				min-width: 70px;
			}
		}

		.hide-core {
			display: none !important;
		}

		#dev-toggle-container {
			width: 100vw;
			max-width: 750px;
			margin: 0 auto;
			display: flex;
			justify-content: flex-end;
		}

		#dev-toggle {
			font-size: 0.98em;
			background: none;
			border: none;
			color: var(--desc);
			padding: 0.15em 0.8em;
			cursor: pointer;
			border-radius: var(--radius);
			opacity: 0.68;
			transition: background 0.14s, color 0.14s, opacity 0.12s;
			text-decoration: underline dotted;
			margin-top: 0.2em;
			margin-bottom: 0.2em;
		}

		#dev-toggle:hover,
		#dev-toggle:focus {
			color: var(--accent-light);
			background: #23262b;
			opacity: 0.90;
		}
	</style>
</head>

<body>
	<div id="dev-toggle-container">
		<button id="dev-toggle" onclick="toggleDev()" title="Show/hide developer features">Show dev
			options</button>
	</div>
	<h1>configng-v2 Modules Menu</h1>
	<div id="breadcrumbs"></div>
	<div id="menu"></div>
	<div id="command-output"></div>
	<script>
		// ----- BEGIN: Easy-to-edit JSON
		const JSON_URL = "https://raw.githubusercontent.com/Tearran/configng-v2/refs/heads/main/docs/modules_metadata.json";
		// ----- END: Easy-to-edit JSON

		let data = {};
		let state = { cat: null, group: null, feature: null };
		let showDev = window.location.hash === "#dev";

		function setBreadcrumbs() {
			const bc = [];
			if (state.cat) bc.push({ label: "Categories", action: () => navTo() });
			if (state.cat && state.group) bc.push({ label: state.cat, action: () => navTo(state.cat) });
			if (state.cat && state.group && state.feature) bc.push({ label: state.group, action: () => navTo(state.cat, state.group) });
			if (state.cat && state.group && state.feature) bc.push({ label: state.feature });
			const el = document.getElementById('breadcrumbs');
			el.innerHTML = bc.map((b, i) =>
				b.action
					? `<div tabindex="0" class="breadcrumb" onclick="(${b.action})()" onkeydown="if(event.key==='Enter'){(${b.action})()}">${b.label}</div>`
					: `<div class="breadcrumb" style="pointer-events:none;opacity:.7">${b.label}</div>`
			).join(' <span style="color:var(--desc)">›</span> ');
		}

		function navTo(cat = null, group = null, feature = null) {
			state.cat = cat;
			state.group = group;
			state.feature = feature;
			setBreadcrumbs();
			renderMenu();
			clearOutput();
		}

		function renderMenu() {
			const menu = document.getElementById('menu');
			let html = '';
			if (!state.cat) {
				html += '<ul>';
				for (const cat of Object.keys(data)) {
					html += `<li><button class="menu-btn" id="menu-btn-${escapeHTML(cat.toLowerCase())}" onclick="navTo('${escapeHTML(cat)}')">${escapeHTML(cat)}</button></li>`;
				}
				html += '</ul>';
			} else if (state.cat && !state.group) {
				const groups = Object.keys(data[state.cat]);
				html += `<h2>Category: ${escapeHTML(state.cat)}</h2><ul>`;
				for (const group of groups) {
					html += `<li><button class="menu-btn" id="menu-btn-${escapeHTML(group.toLowerCase())}" onclick="navTo('${escapeHTML(state.cat)}','${escapeHTML(group)}')">${escapeHTML(group)}</button></li>`;
				}
				html += '</ul>';
			} else if (state.cat && state.group && !state.feature) {
				const mods = data[state.cat][state.group];
				html += `<h2>${escapeHTML(state.cat)} &gt; ${escapeHTML(state.group)}</h2><ul>`;
				for (const modKey in mods) {
					const mod = mods[modKey];
					html += `<li><button class="feature-btn" onclick="navTo('${escapeHTML(state.cat)}','${escapeHTML(state.group)}','${escapeHTML(modKey)}')"><span class="feature-label">${escapeHTML(mod.feature)}</span><span class="feature-desc">&nbsp;–&nbsp;${escapeHTML(mod.description || '')}</span></button></li>`;
				}
				html += '</ul>';
			} else if (state.cat && state.group && state.feature) {
				const mod = data[state.cat][state.group][state.feature];
				html += `<div class="module-card">`;
				html += `<h2>${escapeHTML(mod.feature)}</h2>`;
				if (mod.description) html += `<div class="desc">${escapeHTML(mod.description)}</div>`;
				if (mod.extend_desc) html += `<div class="desc"><small>${escapeHTML(mod.extend_desc)}</small></div>`;
				if (mod.options) {
					html += `<div class="options-block"><b>Options:</b>`;
					for (const opt of mod.options.split(',')) {
						const trimmed = opt.trim();
						if (!trimmed) continue;
						html += `<button class="option-btn" onclick="sendOption('${escapeHTML(mod.feature)}','${escapeHTML(trimmed)}')">${escapeHTML(trimmed)}</button>`;
						html += `<div class="option-desc" id="desc-${escapeHTML(trimmed.replace(/[^a-zA-Z0-9_-]/g, '_'))}"></div>`;
					}
					html += `</div>`;
				}
				html += `<details><summary>Raw details</summary><pre>${escapeHTML(JSON.stringify(mod, null, 2))}</pre></details>`;
				html += `</div>`;
			}
			menu.innerHTML = html;
			hideOrShowCore();
		}

		function hideOrShowCore() {
			const coreBtn = document.getElementById('menu-btn-core');
			if (coreBtn) {
				if (showDev) {
					coreBtn.classList.remove('hide-core');
				} else {
					coreBtn.classList.add('hide-core');
				}
			}
		}

		function escapeHTML(str) {
			return str.replace(/[<>&"]/g, function (c) {
				return { '<': '&lt;', '>': '&gt;', '&': '&amp;', '"': '&quot;' }[c];
			});
		}

		function sendOption(feature, option) {
			const out = document.getElementById('command-output');
			out.textContent = `Would send: ${feature} ${option}`;
		}
		function clearOutput() {
			document.getElementById('command-output').textContent = '';
		}

		function toggleDev() {
			showDev = !showDev;
			if (showDev) {
				window.location.hash = "#dev";
			} else {
				window.location.hash = "";
			}
			hideOrShowCore();
			const toggleBtn = document.getElementById('dev-toggle');
			toggleBtn.textContent = showDev ? "Hide dev options" : "Show dev options";
		}

		window.navTo = navTo;
		window.sendOption = sendOption;

		window.addEventListener("hashchange", () => {
			showDev = window.location.hash === "#dev";
			const toggleBtn = document.getElementById('dev-toggle');
			toggleBtn.textContent = showDev ? "Hide dev options" : "Show dev options";
			hideOrShowCore();
		});

		// Use fetch to load JSON_URL (if it's a string), or use as object directly.
		(function () {
			if (typeof JSON_URL === "string") {
				fetch(JSON_URL)
					.then(response => {
						if (!response.ok) throw new Error("Failed to fetch JSON");
						return response.json();
					})
					.then(json => {
						data = json;
						const toggleBtn = document.getElementById('dev-toggle');
						toggleBtn.textContent = showDev ? "Hide dev options" : "Show dev options";
						navTo();
					})
					.catch(err => {
						document.getElementById('menu').innerHTML = "<b>Failed to load JSON from GitHub</b>";
						console.error(err);
					});
			} else if (typeof JSON_URL === "object") {
				data = JSON_URL;
				const toggleBtn = document.getElementById('dev-toggle');
				toggleBtn.textContent = showDev ? "Hide dev options" : "Show dev options";
				navTo();
			} else {
				document.getElementById('menu').innerHTML = "<b>No JSON data found</b>";
			}
		})();
	</script>
</body>

</html>